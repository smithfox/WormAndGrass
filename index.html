<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <title>Worm And Grass</title>
    <style>
        html,
        body {
            overflow: hidden;
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
        }
        #renderCanvas {
            width: 100%;
            height: 100%;
            touch-action: none;
        }
    </style>
</head>

<body>
    <canvas id="renderCanvas" style="background-color: beige;">Browser does not support HTML5 canvas</canvas>

    <script type="text/javascript">
        const dpr = window.devicePixelRatio;
        const canvas = document.getElementById('renderCanvas');

        const CanvasWidth = 1440;
        const CanvasHeight = 768;

        const resizeCanvas = () => {
            console.log("resizeCanvas");
            var newCanvasWidth = CanvasWidth;
            var newCanvasHeight = CanvasHeight;

            const aspectCanvas = CanvasWidth / CanvasHeight;
            const aspectWindow = window.innerWidth / window.innerHeight;

            //保证比例不变
            if (aspectWindow > aspectCanvas) { // window 偏宽
                newCanvasHeight = window.innerHeight;
                newCanvasWidth = Math.floor(newCanvasHeight * aspectCanvas);
            } else { //window 偏高
                newCanvasWidth = window.innerWidth;
                newCanvasHeight = Math.floor(newCanvasWidth / aspectCanvas);
            }

            canvas.width = newCanvasWidth * dpr;
            canvas.height = newCanvasHeight * dpr;
            canvas.style.width = newCanvasWidth + 'px';
            canvas.style.height = newCanvasHeight + 'px';
        
            drawExample();
        }

        const drawExample = () => {
            console.log("drawExample");
            var ctx = canvas.getContext('2d');
            ctx.fillRect(0, 0, 1440, 900);
            ctx.fillStyle = 'red';
            ctx.font = '2em Arial';
            ctx.fillText('Hello, Worm and Grass!', 700, 450);
        }

        resizeCanvas();

        window.onresize = resizeCanvas;
    </script>
</body>

</html>